# WB-Toolbox (YYYY-MM-DD) Release Notes {[`#v4`](https://github.com/robotology/wb-toolbox/tree/v4)}

This is the first release for which a changelog was introduced.

## Important Changes

- The toolbox style is now defined by a [`.clang-format`](https://github.com/robotology/wb-toolbox/.clang-format) file.
  PRs must be compliant to this style in order to be merged.
- The `master` branch is protected. Only repo admins can directly push to `master` (even if this is discouraged).
- CMake 3.5 is now required.
- The toolbox is now split in three components: `WBToolboxLibrary`, `WBToolboxMex`, `WBToolboxCoder`.
- Doxygen documentation greatly improved.

## New Features

- First version that support Simulink Coder for generating C++ code from a model.
- Most of the classes now use the pimpl idiom.
- Headers have been cleaned with IWYU.

### `WBToolboxLibrary`

- `BlockInformation` interface has been polished. Now it uses enums and const arguments.
- Implemented new logic for parsing parameters. Added `ConvertStdVector` helper and `Parameter` `Parameters` classes.
- `Log` switched to a `stringstream` implementation, and the verbosity automatically changes between `Debug` and `Release`.
- All the templates have been moved in the `cpp` file, and the allowed instantiations are now explicitly specialized or declared in the header.
- Improved the logic to compute the number of block's parameters.
- Changed many enums names and their scope for improving readability. Switched to `enum class`.
- Improved checks on Signal validity before their usage in all blocks.

### `WBToolboxMex`

- The S-Function was renames from `toolbox.cpp` to `WB-Toolbox.cpp`.
- Now also the `BlockInformation` object is stored in the PWork instead of being created every time.
- Checks on pointers gathered from the PWork have been improved.

### `WBToolboxCoder`

- First version of `CoderBlockInformation` class.
- First version of `WBToolbox.tlc` file for inlining the S-Function.
- First version of the C++ wrapper for executing the class autogenerated by Simulink Coder.

## Bug Fixes

### `WBToolboxLibrary`

- Fixed wrong handling of `Signal::setBuffer` in the `DataFormat::CONTIGUOUS_ZEROCOPY` case. The memory of the previous buffer, which is not owned by the class, was zeroed and new data was copied on top of it.

### `WBToolboxMex`

### `WBToolboxCoder`

## Other

- `MxAnyType` is now a shared library.
- All files now include the license header.

## Contributors

This is a list of people that contributed to this release (generated from the git history using `git shortlog -ens --no-merges v3.0..v4`):

```
```
